var CatalogueDomElements,GAP;window.Gap=window.Gap||{},Gap.Portal=Gap.Portal||{},Gap.Portal.UI=Gap.Portal.UI||{};var renderLotViews=function(n){var r,e,t,i,u,l,h,o,f,c,s;if(typeof n.model=="undefined"||typeof n.multiple=="undefined"||typeof n.popUp=="undefined")return null;if(r=new CatalogueDomElements,n.multiple)for(e in r)r[e].Id+=n.popUp?"-popup":"-"+n.model.get("LotId");for(l in r)if(t=r[l],typeof t.View!="undefined"&&(typeof t.Id!="undefined"&&document.getElementById(t.Id)!==null&&(i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new t.View(i),e=document.getElementById(t.Id),e.innerHTML="",e.appendChild(u.el)),typeof t.Class!="undefined"))for(h=document.querySelectorAll("."+t.Class),o=h.length-1;o>=0;o--)h[o].className.match(/noBackBone/)||(i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new t.View(i),h[o].innerHTML="",h[o].appendChild(u.el));document.getElementById(r.Price.Id)!==null&&(t=r.Price,n.model.get("Type")==="Details"?(i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new GAP.Module.Lot.Details.View.Price(i)):(i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new GAP.Module.Lot.View.LotViewVisibility(i)),f=document.getElementById(t.Id),f.innerHTML="",f.appendChild(u.el)),document.getElementById(r.TotalPrice.Id)!==null&&(t=r.TotalPrice,n.model.get("Type")==="Details"?(i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new GAP.Module.Lot.Details.View.Price(i)):(i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new GAP.Module.Lot.View.LotView(i)),f=document.getElementById(t.Id),f.innerHTML="",f.appendChild(u.el)),document.getElementById(r.StartPrice.Id)!==null&&n.model.get("Type")!=="Details"&&(t=r.StartPrice,i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new GAP.Module.Lot.View.LotViewVisibility(i),f=document.getElementById(t.Id),f.innerHTML="",f.appendChild(u.el)),document.getElementById(r.BuyItNowPrice.Id)!==null&&n.model.get("Type")!=="Details"&&(t=r.BuyItNowPrice,i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new GAP.Module.Lot.View.LotViewVisibility(i),f=document.getElementById(t.Id),f.innerHTML="",f.appendChild(u.el)),document.getElementById(r.LotDetailsBids.Id)!==null?(c=new GAP.Module.Lot.Details.View.Bids({listenTo:r.LotDetailsBids.ListenTo,model:n.model}),s=document.getElementById(r.LotDetailsBids.Id),s.innerHTML="",s.appendChild(c.el)):document.getElementById(r.Bids.Id)!==null&&(c=new GAP.Module.Lot.View.LotView({listenTo:r.Bids.ListenTo,model:n.model}),s=document.getElementById(r.Bids.Id),s.innerHTML="",s.appendChild(c.el)),n.model.get("IsBiddingClosed")===!0&&n.model.get("ShowSaleResults")==!1&&$("#popup .bids span, #popup .pieceMeal span").html(""),n.model.get("Type")!=="Details"&&(t=r.LotEndTimestamp,i={listenTo:t.ListenTo,model:n.model},typeof t.Options!="undefined"&&_.extend(i,t.Options),u=new GAP.Module.Lot.View.LotEndTime(i))},initBidderRegistration=function(){var n=new GAP.Module.SearchResults.Registration},GAP=GAP||{};GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.Model=GAP.Module.Lot.Model||{},GAP.Module.Lot.Model.LotModel=GAP.Module.Lot.Model.LotModel||{},GAP.Module.Lot.View=GAP.Module.Lot.View||{},GAP.Module.Lot.Details=GAP.Module.Lot.Details||{},GAP.Module.Lot.Details.View=GAP.Module.Lot.Details.View||{},GAP.Module.Lot.View.LotView=GAP.Module.Lot.View.LotView||{},GAP.Module.Lot.View.Timer=GAP.Module.Lot.View.Timer||{},GAP.Module.Lot.View.BidHeading=GAP.Module.Lot.View.BidHeading||{},GAP.Module.Lot.View.Price=GAP.Module.Lot.View.Price||{},GAP.Module.Lot.View.Currency=GAP.Module.Lot.View.Currency||{},GAP.Module.Lot.View.Bids=GAP.Module.Lot.View.Bids||{},GAP.Module.Lot.View.WinningStatus=GAP.Module.Lot.View.WinningStatus||{},GAP.Module.Lot.Details.View.State=GAP.Module.Lot.Details.View.State||{},CatalogueDomElements=function(){this.TimerHeading={Id:"timerHeading",Class:"timerHeadingConfirmation",ListenTo:"TimerHeading",View:GAP.Module.Lot.View.TimerHeading},this.Timer={Id:"timer",Class:"timerConfirmation",ListenTo:"Timer",View:GAP.Module.Lot.View.Timer},this.PriceHeading={Id:"priceHeading",ListenTo:"BidHeadingMessage",View:GAP.Module.Lot.View.LotView},this.Price={Id:"price",ListenTo:"LeadingBidMessage",Options:{ChangeClass:"LotDetailsPriceClass",ParentIdPrefix:"priceContainer"}},this.Currency={Id:"currency",Class:"currency",ListenTo:"CurrencyDisplay",View:GAP.Module.Lot.View.LotView},this.StartPriceHeading={Id:"openingPriceHeading",ListenTo:"OpeningBidMessageHeading",Options:{ChangeClass:"LotDetailsPriceClass"},View:GAP.Module.Lot.View.LotView},this.StartPrice={Id:"openingPrice",ListenTo:"OpeningBidMessage",Options:{ChangeClass:"LotDetailsPriceClass",ParentIdPrefix:"openingPriceContainer"}},this.StartPriceCurrency={Id:"openingPriceCurrency",ListenTo:"StartPriceCurrency",View:GAP.Module.Lot.View.LotView},this.PieceMeal={Id:"pieceMeal",ListenTo:"PieceMealCurrentBidMessage",View:GAP.Module.Lot.View.LotView},this.Reserve={Id:"reserve",ListenTo:"ReserveMessage",View:GAP.Module.Lot.View.LotView},this.Bids={Id:"bids",ListenTo:"TotalBids"},this.LotDetailsBids={Id:"lotDetailsBids",ListenTo:"TotalBids"},this.BidState={Id:"bidState",ListenTo:"WinningStatusMessage",View:GAP.Module.Lot.View.WinningStatus},this.LotDetailsState={Id:"lotDetailsState",ListenTo:"LotDetailsStateMessage",View:GAP.Module.Lot.Details.View.State},this.WatchListCount={Id:"bidWatchCount",ListenTo:"WatchListCount",View:GAP.Module.Lot.View.LotView},this.MinimumBid={Class:"minBidText",ListenTo:"MinimumBidDisplay",View:GAP.Module.Lot.View.LotView},this.ConfirmationAmount={Class:"confirmationAmount",ListenTo:"ConfirmationAmountDisplay",View:GAP.Module.Lot.View.LotView},this.ConfirmationCurrency={Class:"confirmationCurrency",ListenTo:"ConfirmationCurrencyDisplay",View:GAP.Module.Lot.View.LotView},this.ConfirmationPieceMeal={Class:"confirmationPieceMeal",ListenTo:"PieceMealConfirmationMessage",View:GAP.Module.Lot.View.LotView},this.BidHistory={Id:"bidHistoryContainer",ListenTo:"BidHistory",View:GAP.Module.Lot.Details.View.BidHistory},this.MyMaximumBid={Class:"currentMaximumBid",ListenTo:"CurrentMaximumBidDisplay",View:GAP.Module.Lot.Details.View.Price,Options:{ChangeClass:"CurrentMaximumBidDisplayClass"}},this.TotalPrice={Id:"totalPrice",ListenTo:"TotalCurrentBidMessage",Options:{ChangeClass:"LotDetailsPriceClass"}},this.CurrentMaximumBidCurrency={Class:"currentMaximumBidCurrency",ListenTo:"CurrentMaximumCurrencyDisplay",View:GAP.Module.Lot.View.LotView},this.DialogMessage={Id:"timedBiddingNotificationMessage",ListenTo:"DialogMessage",View:GAP.Module.Lot.View.LotView},this.DialogOkButton={Id:"timedBiddingOkButton",ListenTo:"DialogButton",View:GAP.Module.Lot.View.LotView},this.DialogBidAgainButton={Id:"timedBiddingBidAgainButton",ListenTo:"DialogButton",View:GAP.Module.Lot.View.LotView},this.BuyItNowPriceHeading={Id:"buyItNowPriceHeading",ListenTo:"BuyItNowPriceMessageHeading",View:GAP.Module.Lot.View.LotView},this.BuyItNowPrice={Id:"buyItNowPrice",ListenTo:"BuyItNowPriceMessage",Options:{ParentIdPrefix:"buyItNowPriceContainer"},View:GAP.Module.Lot.View.LotViewVisibility},this.BuyItNowPriceCurrency={Id:"buyItNowPriceCurrency",ListenTo:"BuyItNowPriceCurrency",View:GAP.Module.Lot.View.LotView},this.BuyItNowPieceMeal={Id:"buyItNowPieceMeal",ListenTo:"PieceMealBuyItNowPriceMessage",View:GAP.Module.Lot.View.LotView},this.BuyItNowConfirmationAmount={Class:"buyItNowConfirmationAmount",ListenTo:"BuyItNowConfirmationAmountDisplay",View:GAP.Module.Lot.View.LotView},this.BuyItNowConfirmationCurrency={Class:"buyItNowConfirmationCurrency",ListenTo:"BuyItNowConfirmationCurrencyDisplay",View:GAP.Module.Lot.View.LotView},this.BuyItNowConfirmationPieceMeal={Class:"buyItNowConfirmationPieceMeal",ListenTo:"BuyItNowPieceMealConfirmationMessage",View:GAP.Module.Lot.View.LotView},this.LotEndTimestamp={ListenTo:"TimeRemaining",View:GAP.Module.Lot.View.LotEndTime},this.AdditionalFees={Id:"popup-trigger",ListenTo:"AdditionalFees",Options:{ParentIdPrefix:"popup-trigger"},View:GAP.Module.Lot.View.LotView},this.CurrentPricePeacemeal={Id:"current-price-piecemeal",ListenTo:"CurrentPricePeacemealMessage",Options:{ChangeClass:"current-price-piecemeal"},View:GAP.Module.Lot.View.LotView}},GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.Model=GAP.Module.Lot.Model||{},GAP.Module.Lot.Model.LotModel=Backbone.Model.extend({defaults:{Type:"",ShowSaleResults:!0,Filter:["EventType","MinimumBidTextBefore","MinimumBidTextAfter"],Map:{LeadBidderId:"WinningBidderId",HammerPrice:"LeadingBid",EventCurrency:"Currency",MinimumBidAmount:"MinimumBid"},RegistrationStatuses:{Pending:0,Approved:1,Declined:2}},initialize:function(){Backbone.Events.on("GAP.Service.LotDetail.DataUpdated",this.saveValues,this);Backbone.Events.on("GAP.Service.LotDetail.LotEndTimeChanged",this.saveValues,this);Backbone.Events.on("GAP.SingleLot.Update",this.prepareUpdate,this);this.on("change:Currency",this.currencyLogic,this);this.on("change:LeadingBid",this.bidAmountLogic,this);this.on("change:LeadingBid",this.pieceMealLogic,this);this.on("change:LeadingBid",this.startPriceLogic,this);this.on("change:StartPrice",this.startPriceLogic,this);this.on("change:HasReserve",this.reserveLogic,this);this.on("change:Reserve",this.reserveLogic,this);this.on("change:IsPieceMeal",this.pieceMealLogic,this);this.on("change:Quantity",this.pieceMealLogic,this);this.on("change:TotalBids",this.totalBidsToInt,this);this.on("change:CurrentMaximumBid",this.pieceMealLogic,this);this.on("change:SecondsRemaining",this.timeRemainingLogic,this);this.on("change:LotClosed",this.isBiddingClosedLogic,this);this.on("change:LotClosed",this.lotClosedLogic,this);this.on("change:LotClosed",this.startPriceLogic,this);this.on("change:LotClosed",this.refreshBiddingButton,this);this.on("change:WishListCountChange",this.watchListLogic);this.on("change:BuyItNowPrice",this.buyItNowPriceLogic,this);this.on("change:BuyItNowPrice",this.pieceMealLogic,this);this.on("change:LotClosed",this.buyItNowPriceLogic,this);this.on("change:MinimumBid",this.buyItNowPriceLogic,this);_.bind(this.dataReload,this),_.bindAll(this,"updateSuccess","updateError")},executeUpdate:function(n){var t=this.collection.url,i;this.get("Log")&&(i=this.get("TimeRemaining").Seconds,t=t+"&lotId="+this.get("LotId")+"&closed="+this.get("LotClosed")+"&remain="+i),this.fetch(_.extend(n,{url:t,type:"post",remove:!1,timeout:5e3,success:this.updateSuccess,error:this.updateError}))},updateSuccess:function(){},updateError:function(n,t){t&&t.status===404&&window.location.reload(),Backbone.Events.trigger("GAP.EveryLot.Update",null)},currencyLogic:function(){this.get("Currency")?this.get("LeadingBid")&&this.get("ShowSaleResults")?this.set({CurrencyDisplay:"<strong>"+this.get("Currency")+"</strong>"}):this.set({CurrencyDisplay:""}):this.set({CurrencyDisplay:""})},bidAmountLogic:function(){this.get("ShowSaleResults")?this.get("LeadingBid")?(this.set({LeadingBidMessage:"<strong>"+$.autoNumeric.FormatAmount(this.get("LeadingBid"))+"</strong>"}),this.get("IsPieceMeal")&&this.get("Quantity")>1&&this.setCurrentPricePeacemealMessage()):this.set({LeadingBidMessage:"<strong>"+portalScriptResources.None+"</strong>"}):this.set({LeadingBidMessage:""}),this.currencyLogic(),this.reserveLogic()},startPriceLogic:function(){this.get("ShowSaleResults")&&this.get("LotClosed")===!1?this.get("LeadingBid")===0&&this.get("NextMinimumBid")>0?(this.set({OpeningBidMessage:"<strong>"+$.autoNumeric.FormatAmount(this.get("NextMinimumBid"))+"</strong>"}),this.set({OpeningBidMessageHeading:portalScriptResources.BidOpening}),this.set({StartPriceCurrency:"<strong>"+this.get("Currency")+"</strong>"})):(this.set({OpeningBidMessage:""}),this.set({OpeningBidMessageHeading:""}),this.set({StartPriceCurrency:""})):(this.set({OpeningBidMessage:""}),this.set({OpeningBidMessageHeading:""}),this.set({StartPriceCurrency:""}))},reserveLogic:function(){this.set({Reserve:parseFloat(this.get("Reserve"))}),this.get("Reserve")?this.set({HasReserve:!0}):this.set({HasReserve:!1});var n=document.getElementById("reserveMet");this.get("HasReserve")?this.get("LeadingBid")>=this.get("Reserve")?this.set({ReserveMessage:portalScriptResources.Yes}):this.set({ReserveMessage:portalScriptResources.No}):this.set({ReserveMessage:""})},pieceMealLogic:function(){this.get("IsPieceMeal")&&this.get("Quantity")>1&&(this.get("LeadingBid")?(this.set({PieceMealMaximumBidMessage:"("+$.autoNumeric.FormatAmount(this.get("LeadingBid"))+" x "+$.autoNumeric.FormatAmount(this.get("Quantity"))+" = "+this.getPieceMealPrice("MyMaximumBid")+" "+this.get("CurrencyDisplay")+")"}),this.set({PieceMealCurrentBidMessage:"("+$.autoNumeric.FormatAmount(this.get("LeadingBid"))+" x "+$.autoNumeric.FormatAmount(this.get("Quantity"))+" = "+this.getPieceMealPrice("CurrentBid")+" "+this.get("CurrencyDisplay")+")"}),this.set({TotalCurrentBidMessage:this.getPieceMealPrice("CurrentBid")}),this.setCurrentPricePeacemealMessage()):(this.set({PieceMealCurrentBidMessage:""}),this.set({PieceMealMaximumBidMessage:""}),this.set({TotalCurrentBidMessage:portalScriptResources.None})),this.showBuyItNow()?this.set({PieceMealBuyItNowPriceMessage:"("+$.autoNumeric.FormatAmount(this.get("BuyItNowPrice"))+" x "+$.autoNumeric.FormatAmount(this.get("Quantity"))+" = "+this.getPieceMealPrice("BuyItNowPrice")+" "+this.get("Currency")+")"}):this.set({PieceMealBuyItNowPriceMessage:""}))},totalBidsToInt:function(){this.get("TotalBids")&&typeof this.get("TotalBids")=="string"&&this.set({TotalBids:parseInt(this.get("TotalBids"))})},timeRemainingLogic:function(){typeof(this.get("SecondsRemaining")==="Number")?(this.setTimeRemaining({SecondsRemaining:this.get("SecondsRemaining")}),this.unset("SecondsRemaining",{silent:!0})):this.set({TimeRemaining:{Days:null,Hours:null,Minutes:null,Seconds:null}}),this.timerLogic()},timerLogic:function(){var n=Date.parse((new Date).toUTCString()),t;this.get("StartTimeUtc")&&this.set({StartDate:parseInt(this.get("StartTimeUtc").replace(/^\/Date\(/,"").replace(/\)\/$/,""))}),this.get("StartDate")>n?this.set({EventStarted:!1}):this.set({EventStarted:!0}),this.get("EndTimeUtc")&&this.set({EndDate:parseInt(this.get("EndTimeUtc").replace(/^\\?\/Date\(/,"").replace(/\)\\?\/$/,""))}),t=+new Date,this.get("TimeRemaining").Seconds<600&&this.get("TimeRemaining").Seconds>0?this.set({TimerAlert:!0}):this.set({TimerAlert:!1}),moment(this.get("EndDate")).format("YYYY")===moment().format("YYYY")?this.set({TimerFormat:"D MMM"}):this.set({TimerFormat:"D MMM YYYY"}),this.parseTimerProperties()},lotClosedLogic:function(){this.get("LotClosed")===!0&&(this.get("TimerHeading")!==""&&this.set({TimerHeading:""}),typeof this.get("BuyItNowPrice")!="undefined"&&this.get("BuyItNowPrice")!==0&&this.get("BuyItNowPrice")==this.get("LeadingBid")?this.set({Timer:portalScriptResources.SoldViaBuyItNow}):this.set({Timer:portalScriptResources.TimerLotClosed}),this.get("TimerAlert")&&this.set({TimerAlert:!1}))},isBiddingClosedLogic:function(){var n="<span>"+portalScriptResources.Additional_Fees+'</span>&nbsp;<i class="icon icon-question-mark"></i>';this.get("IsNewUiSkinAuctionCatalogueEnabled")&&(n='<span class="material-icons additional-fees-toggle-icon">help</span>'),this.get("ShowSaleResults")?this.get("LotClosed")?(this.set({IsBiddingClosed:!0}),this.set({BidHeadingMessage:portalScriptResources.BidClosing}),this.get("LeadingBid")&&this.set({AdditionalFees:n})):(this.set({IsBiddingClosed:!1}),this.set({BidHeadingMessage:portalScriptResources.BidCurrent}),(this.get("LeadingBid")||this.get("NextMinimumBid"))&&this.set({AdditionalFees:n})):this.get("LotClosed")?(this.set({IsBiddingClosed:!0}),this.set({BidHeadingMessage:""}),this.set({AdditionalFees:""})):(this.set({IsBiddingClosed:!1}),this.set({BidHeadingMessage:""}),this.set({AdditionalFees:""}))},watchListLogic:function(){if(this.get("WishListCountChange")){if(typeof this.get("WatchListCount")=="number"){var n=this.get("WatchListCount")+this.get("WishListCountChange");this.set({WatchListCount:n})}this.unset("WishListCountChange",{silent:!0})}},buyItNowPriceLogic:function(){this.showBuyItNow()?(this.set({BuyItNowPriceMessage:"<strong>"+$.autoNumeric.FormatAmount(this.get("BuyItNowPrice"))+"</strong>"}),this.set({BuyItNowPriceMessageHeading:portalScriptResources.BuyItNowPrice}),this.set({BuyItNowPriceCurrency:"<strong>"+this.get("Currency")+"</strong>"})):(this.set({BuyItNowPriceMessage:""}),this.set({BuyItNowPriceMessageHeading:""}),this.set({BuyItNowPriceCurrency:""}))},showBuyItNow:function(){return this.get("LotClosed")===!0?!1:this.get("MinimumBid")?this.get("BuyItNowPrice")>0&&this.get("BuyItNowPrice")>this.get("MinimumBid"):this.get("BuyItNowPrice")>0},generateValues:function(){this.reserveLogic(),this.currencyLogic(),this.bidAmountLogic(),this.startPriceLogic(),this.pieceMealLogic(),this.totalBidsToInt(),this.timeRemainingLogic(),this.isBiddingClosedLogic(),this.buyItNowPriceLogic()},parseTimerProperties:function(){if(this.Countdown){if(this.Countdown.getRemainingTime()===this.get("TimeRemaining").Seconds)return;this.Countdown.abort()}var n=this;this.get("AuctionType")==="Timed"?this.get("EventStarted")?this.get("LotClosed")===!1&&(this.get("TimeRemaining").Seconds>0?(this.unset("LastReload",{silent:!0}),this.Countdown=new Countdown(this.get("TimeRemaining").Seconds,this.generateTimer,this,function(){n.dataReload()})):this.get("TimeRemaining").Seconds!==null&&this.get("LastReload")!==!0&&(this.set("LastReload",!0),this.dataReload())):this.biddingOpens():(this.set({TimerHeading:""}),this.set({Timer:""}))},displayCountdown:function(){return this.get("TimeRemaining").Hours>0?this.get("TimeRemaining").Hours+portalScriptResources.h+" "+(this.get("TimeRemaining").Minutes-this.get("TimeRemaining").Hours*60)+portalScriptResources.m:this.get("TimeRemaining").Minutes>0?this.get("TimeRemaining").Minutes+portalScriptResources.m+" "+(this.get("TimeRemaining").Seconds-this.get("TimeRemaining").Minutes*60)+portalScriptResources.s:this.get("TimeRemaining").Seconds>0?this.get("TimeRemaining").Seconds+portalScriptResources.s:""},setTimeRemaining:function(n){this.set({TimeRemaining:{Days:Math.floor(n.SecondsRemaining/86400),Hours:Math.floor(n.SecondsRemaining/3600),Minutes:Math.floor(n.SecondsRemaining/60),Seconds:n.SecondsRemaining}})},getPieceMealPrice:function(n){return n==="MyMaximumBid"?$.autoNumeric.FormatAmount(this.get("Quantity")*this.get("CurrentMaximumBid")):n==="CurrentBid"?$.autoNumeric.FormatAmount(this.get("Quantity")*this.get("LeadingBid")):n==="BuyItNowPrice"?$.autoNumeric.FormatAmount(this.get("Quantity")*this.get("BuyItNowPrice")):void 0},refreshBiddingButton:function(){var n=this.get("LotId");this.get("LotClosed")?$("#lot-".concat(n)).addClass("lot-closed"):$("#lot-".concat(n)).removeClass("lot-closed")},setCurrentPricePeacemealMessage:function(){this.set({CurrentPricePeacemealMessage:"("+this.getPieceMealPrice("CurrentBid")+" "+this.get("Currency")+")"})}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.View=GAP.Module.Lot.View||{},GAP.Module.Lot.View.LotView=Backbone.View.extend({tagName:"span",defaults:{strong:!0},initialize:function(){this.options=_.extend({},this.defaults,this.options);this.model.on("change:"+this.options.listenTo,this.render,this);this.render()},render:function(){this.el.innerHTML=typeof this.model.get(this.options.listenTo)!="undefined"?this.model.get(this.options.listenTo):""}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.View=GAP.Module.Lot.View||{},GAP.Module.Lot.View.LotEndTime=Backbone.View.extend({defaults:{dataLotEnd:"data-lot-end"},initialize:function(){this.options=_.extend({},this.defaults,this.options);this.model.on("change:"+this.options.listenTo,this.render,this);this.renderFromEndTime()},render:function(){var t=this.model.get("LotId"),n;t&&(n=this.model.get("TimeRemaining").Seconds,n&&$("#lot-".concat(t)).attr(this.defaults.dataLotEnd,moment.utc().add(n,"seconds").unix().valueOf()))},renderFromEndTime:function(){var t=this.model.get("LotId"),n;t&&(n=this.model.get("EndTimeUtc"),n&&$("#lot-".concat(t)).attr(this.defaults.dataLotEnd,moment(n).unix().valueOf()))}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.Collection=GAP.Module.Lot.Collection||{},GAP.Module.Lot.Collection.LotCollection=Backbone.Collection.extend({parse:function(n){var t,i,u,f,e,r,o,s;if(_.isArray(n)||(n=[n]),n.length)for(t=0;t<n.length;t++)if(typeof n[t].Model!="undefined"?typeof n[t].Model.LotId!="undefined"&&(i=n[t].Model):typeof n[t].LotId!="undefined"&&(i=n[t]),i)if(u={},f=this.findWhere({LotId:i.LotId}),typeof f!="undefined"){e=f.get("Map");for(r in i){o=!1;for(s in e)r===s&&(u[e[s]]=i[r],o=!0);o||(u[r]=i[r])}f.set(u)}else continue;else continue;else return n}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.Model=GAP.Module.Lot.Model||{},GAP.Module.Lot.Model.CollectionsManager=Backbone.Model.extend({defaults:{ChannelPrefix:{Lot:"/lot-",Auction:"/auction-"},WebSyncConnected:!1,WebSyncReconnectMessageTimeOut:1e4,WebSyncEvents:{BidderRegistrationStatusChanged:"Gap.Lot.BidderRegistrationStatus.Update"},Reconnect:{Retries:0,TimeOut:2,TotalRetries:0,MaxTotalRetries:20}},flushTimeout:undefined,lotTracker:{},initialize:function(){this.set({WebSyncClient:new fm.websync.client(this.get("WebSyncPath"))}),_.bindAll(this,"prepareUpdate","updateSuccess","updateError"),_.bindAll(this,"webSyncSuccess","webSyncFailure","webSyncStreamFailure"),_.bindAll(this,"webSyncChannelSuccess","webSyncChannelFailure","webSyncChannelReceive");Backbone.Events.on("GAP.EveryLot.Update",this.prepareUpdate,this)},executeUpdate:function(n){var t,i;++this.get("Reconnect").TotalRetries>this.get("Reconnect").MaxTotalRetries?this.displayRefreshPageMessage():(t=this.get("LotCollection").url,n.log&&(i=n.data?"&count="+JSON.parse(n.data).length:"",t=t+"&fullReload=true"+i),this.get("LotCollection").fetch(_.extend(n,{url:t,type:"post",remove:!1,timeout:5e3,success:this.updateSuccess,error:this.updateError})))},updateSuccess:function(){this.get("Reconnect").Retries=0},updateError:function(n,t){t&&t.status===404&&window.location.reload(),this.displayReconnectMessage();var r=Math.pow(this.get("Reconnect").TimeOut,++this.get("Reconnect").Retries)*1e3;setTimeout(function(){Backbone.Events.trigger("GAP.EveryLot.Update",null)},r)},webSyncSuccess:function(n){this.set({WebSyncConnected:!0}),n._isReconnect&&Backbone.Events.trigger("GAP.EveryLot.Update",null)},webSyncFailure:function(){this.set({WebSyncConnected:!1})},webSyncStreamFailure:function(){this.set({WebSyncConnected:!1}),setTimeout(_.bind(function(){this.get("WebSyncConnected")===!1&&this.displayReconnectMessage()},this),this.get("WebSyncReconnectMessageTimeOut"))},autoUpdater:function(){this.get("WebSyncClient").connect({onSuccess:this.webSyncSuccess,onFailure:this.webSyncFailure,onStreamFailure:this.webSyncStreamFailure})},webSyncChannelSuccess:function(){},webSyncChannelFailure:function(){},webSyncChannelReceive:function(n){var t=JSON.parse(n.getDataJson()),i;if(typeof t.EventType!="undefined"&&typeof this.get("WebSyncEvents")[t.EventType]!="undefined")return Backbone.Events.trigger(this.get("WebSyncEvents")[t.EventType],t);if(typeof t.EventType!="undefined"&&t.EventType==="TimedBidAdded"&&t.Timestamp)try{if(t.LotId in this.lotTracker&&this.lotTracker[t.LotId]>t.Timestamp)return i=this.get("LotCollection").findWhere({LotId:t.LotId}).toJSON(),this.trackStaleEvent(t,i,this.lotTracker[t.LotId]),null;this.lotTracker[t.LotId]=t.Timestamp}catch(r){console.error(r)}return Backbone.Events.trigger("GAP.Service.LotDetail.DataUpdated",t)},trackStaleEvent:function(n,t,i){window.appInsights&&(window.appInsights.trackEvent("StaleTimedBidEvent",{LotId:n.LotId,CurrentTimestamp:i||"",NewTimestamp:n.Timestamp||"",CurrentBidCount:t.TotalBids||0,NewBidCount:n.TotalBids||0,CurrentLeadingBid:t.LeadingBid,NewLeadingBid:n.LeadingBid,BidderId:t.BidderId||"",NewLeadingBidder:n.LeadBidderId||""}),this.flushTimeout&&clearTimeout(this.flushTimeout),this.flushTimeout=setTimeout(window.appInsights.flush,1e3))},subscribeToChannel:function(n){var t={onSuccess:this.webSyncChannelSuccess,onFailure:this.webSyncChannelFailure,onReceive:this.webSyncChannelReceive};_.extend(t,n),this.get("WebSyncClient").subscribe(t)},subscribeNotifications:function(n){typeof n.LotId!="undefined"&&this.subscribeToChannel&&this.subscribeToChannel({channel:this.get("ChannelPrefix").Lot+n.LotId}),typeof n.AuctionId!="undefined"&&this.subscribeToChannel&&this.subscribeToChannel({channel:this.get("ChannelPrefix").Auction+n.AuctionId})},displayReconnectMessage:function(){for(var n,t=0;t<this.get("LotCollection").length;t++)n=this.get("LotCollection").at(t),n.Countdown&&n.Countdown.abort(),n.get("TimerHeading")!==""&&n.set({TimerHeading:""}),n.get("Timer")!==portalScriptResources.Reconnecting&&n.set({Timer:portalScriptResources.Reconnecting}),n.get("LotClosed")!==null&&n.set({LotClosed:null})},displayRefreshPageMessage:function(){ShowNotification("error",portalScriptResources.PleaseRefresh,portalScriptResources.ProblemRetrievingLatestBids)},push:function(n,t){var i=this.get("LotCollection");return i?(i.push(n),t&&n.set(t),n):null}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.Details=GAP.Module.Lot.Details||{},GAP.Module.Lot.Details.Model=GAP.Module.Lot.Details.Model||{},GAP.Module.Lot.Model.CollectionsManager=GAP.Module.Lot.Model.CollectionsManager||{},GAP.Module.Lot.Details.Model.CollectionsManager=GAP.Module.Lot.Model.CollectionsManager.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments),this.set({LotCollection:new GAP.Module.Lot.Collection.LotCollection}),this.get("LotCollection").url=this.get("Url")},prepareUpdate:function(){var n={};this.executeUpdate(n)}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.SearchResult=GAP.Module.Lot.SearchResult||{},GAP.Module.Lot.SearchResult.Model=GAP.Module.Lot.SearchResult.Model||{},GAP.Module.Lot.Model.CollectionsManager=GAP.Module.Lot.Model.CollectionsManager||{},GAP.Module.Lot.SearchResult.Model.CollectionsManager=GAP.Module.Lot.Model.CollectionsManager.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments),this.set({LotCollection:new GAP.Module.Lot.Collection.LotCollection}),this.get("LotCollection").url=this.get("Url")},prepareUpdate:function(n){var i,t,r;if(n)i=JSON.stringify(n);else{for(n=[],t=0;t<this.get("LotCollection").length;t++)typeof this.get("LotCollection").at(t).get("LotId")!="undefined"&&typeof this.get("LotCollection").at(t).get("BidderHasBids")!="undefined"&&n.push({LotId:this.get("LotCollection").at(t).get("LotId"),BidderHasBids:this.get("LotCollection").at(t).get("BidderHasBids")});i=JSON.stringify(n)}r={tarditional:!0,data:i,contentType:"application/json",log:!0},this.executeUpdate(r)}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.View=GAP.Module.Lot.View||{},GAP.Module.Lot.View.TimerHeading=GAP.Module.Lot.View.LotView.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments);this.model.on("change:TimerHeadingAlert",this.alertClass,this);this.alertClass()},alertClass:function(){this.el.className=this.model.get("TimerHeadingAlert")?"timerAlert":""}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.View=GAP.Module.Lot.View||{},GAP.Module.Lot.View.Timer=GAP.Module.Lot.View.LotView.extend({initialize:function(){this.constructor.__super__.initialize.apply(this,arguments);this.model.on("change:TimerAlert",this.alertClass,this);this.alertClass()},alertClass:function(){this.el.className=this.model.get("TimerAlert")?"timerAlert":""}}),GAP=GAP||{},GAP.Module=GAP.Module||{},GAP.Module.Lot=GAP.Module.Lot||{},GAP.Module.Lot.View=GAP.Module.Lot.View||{},GAP.Module.Lot.View.LotViewVisibility=Backbone.View.extend({tagName:"span",defaults:{strong:!0},initialize:function(){this.options=_.extend({},this.defaults,this.options);this.model.on("change:"+this.options.listenTo,this.render,this);this.render()},render:function(){var t=this.model.get("LotId"),n;this.options.ParentIdPrefix&&t&&(n="#"+this.options.ParentIdPrefix+"-"+t),typeof this.model.get(this.options.listenTo)!="undefined"?(this.el.innerHTML=this.model.get(this.options.listenTo),n&&(this.model.get(this.options.listenTo)===""||$(this.model.get(this.options.listenTo)).text()===portalScriptResources.None?$(n).hide():$(n).show())):(this.el.innerHTML="",n&&$(n).hide())}}),function(n){function d(n){var t={},i;return n.selectionStart===undefined?(n.focus(),i=document.selection.createRange(),t.length=i.text.length,i.moveStart("character",-n.value.length),t.end=i.text.length,t.start=t.end-t.length):(t.start=n.selectionStart,t.end=n.selectionEnd,t.length=t.end-t.start),t}function b(n,t,i){if(n.selectionStart===undefined){n.focus();var r=n.createTextRange();r.collapse(!0),r.moveEnd("character",i),r.moveStart("character",t),r.select()}else n.selectionStart=t,n.selectionEnd=i}function p(t,i){n.each(i,function(r,u){var f,e;typeof u=="function"?i[r]=u(t,i,r):typeof u=="string"&&(f=u.substr(0,4),f==="fun:"?(e=n.autoNumeric[u.substr(4)],i[r]=typeof e=="function"?n.autoNumeric[u.substr(4)](t,i,r):null):f==="css:"&&(i[r]=n(u.substr(4)).val()))})}function c(n,t){typeof n[t]=="string"&&(n[t]*=1)}function r(t,i){var r=n.extend({},n.fn.autoNumeric.defaults,i),f,e,u,o;return n.metadata&&t&&(r=n.extend(r,t.metadata())),t&&p(t,r),f=r.vMax.toString().split("."),e=!r.vMin&&r.vMin!==0?[]:r.vMin.toString().split("."),c(r,"vMax"),c(r,"vMin"),c(r,"mDec"),r.aNeg=r.vMin<0?"-":"",typeof r.mDec!="number"&&(r.mDec=Math.max((f[1]?f[1]:"").length,(e[1]?e[1]:"").length)),r.altDec===null&&r.mDec>0&&(r.aDec==="."&&r.aSep!==","?r.altDec=",":r.aDec===","&&r.aSep!=="."&&(r.altDec=".")),u=r.aNeg?"([-\\"+r.aNeg+"]?)":"(-?)",r._aNegReg=u,r._skipFirst=new RegExp(u+"[^-"+(r.aNeg?"\\"+r.aNeg:"")+"\\"+r.aDec+"\\d].*?(\\d|\\"+r.aDec+"\\d)"),r._skipLast=new RegExp("(\\d\\"+r.aDec+"?)[^\\"+r.aDec+"\\d]\\D*$"),o=(r.aNeg?r.aNeg:"-")+r.aNum+"\\"+r.aDec,r.altDec&&r.altDec!==r.aSep&&(o+=r.altDec),r._allowed=new RegExp("[^"+o+"]","gi"),r._numReg=new RegExp(u+"(?:\\"+r.aDec+"?(\\d+\\"+r.aDec+"\\d+)|(\\d*(?:\\"+r.aDec+"\\d*)?))"),r}function t(n,t,i){var r,u;if(t.aSign)while(n.indexOf(t.aSign)>-1)n=n.replace(t.aSign,"");return n=n.replace(t._skipFirst,"$1$2"),n=n.replace(t._skipLast,"$1"),n=n.replace(t._allowed,""),t.altDec&&(n=n.replace(t.altDec,t.aDec)),r=n.match(t._numReg),n=r?[r[1],r[2],r[3]].join(""):"",i&&(u="^"+t._aNegReg+"0*(\\d"+(i==="leading"?")":"|$)"),u=new RegExp(u),n=n.replace(u,"$1$2")),n}function y(n,t,i){if(t&&i){var r=n.split(t);r[1]&&r[1].length>i&&(i>0?(r[1]=r[1].substring(0,i),n=r.join(t)):n=r[0])}return n}function o(n,t,i){return t&&t!=="."&&(n=n.replace(t,".")),i&&i!=="-"&&(n=n.replace(i,"-")),n.match(/\d/)||(n+="0"),n}function h(n,t,i){return i&&i!=="-"&&(n=n.replace("-",i)),t&&t!=="."&&(n=n.replace(".",t)),n}function e(n,i){n=t(n,i),n=y(n,i.aDec,i.mDec),n=o(n,i.aDec,i.aNeg);var r=+n;return r>=i.vMin&&r<=i.vMax}function f(n,t,i){return n===""||n===t.aNeg?t.wEmpty==="zero"?n+"0":t.wEmpty==="sign"||i?n+t.aSign:n:null}function s(n,i){var o,u,r,e,s;if(n=t(n,i),o=f(n,i,!0),o!==null)return o;if(u="",u=i.dGroup===2?/(\d)((\d)(\d{2}?)+)$/:i.dGroup===4?/(\d)((\d{4}?)+)$/:/(\d)((\d{3}?)+)$/,r=n.split(i.aDec),i.altDec&&r.length===1&&(r=n.split(i.altDec)),e=r[0],i.aSep)while(u.test(e))e=e.replace(u,"$1"+i.aSep+"$2");return i.mDec!==0&&r.length>1?(r[1].length>i.mDec&&(r[1]=r[1].substring(0,i.mDec)),n=e+i.aDec+r[1]):n=e,i.aSign&&(s=n.indexOf(i.aNeg)!==-1,n=n.replace(i.aNeg,""),n=i.pSign==="p"?i.aSign+n:n+i.aSign,s&&(n=i.aNeg+n)),n}function u(n,t,i,r){var v,y;n=n===""?"0":n.toString();var e="",s=0,u="",o=typeof r=="boolean"||r===null?r?t:0:+r;n!=parseInt(n,10)&&(o=2),v=function(n){var t=o===0?/(\.[1-9]*)0*$/:o===1?/(\.\d[1-9]*)0*$/:new RegExp("(\\.\\d{"+o+"}[1-9]*)0*$");return n=n.replace(t,"$1"),o===0&&(n=n.replace(/\.$/,"")),n},n.charAt(0)==="-"&&(u="-",n=n.replace("-","")),n.match(/^\d/)||(n="0"+n),u==="-"&&+n==0&&(u=""),+n>0&&(n=n.replace(/^0*(\d)/,"$1"));var a=n.lastIndexOf("."),p=a===-1?n.length-1:a,c=n.length-1-p;if(c<=t){if(e=n,c<o)for(a===-1&&(e+=".");c<o;)y="000000".substring(0,o-c),e+=y,c+=y.length;else c>o?e=v(e):c===0&&o===0&&(e=e.replace(/\.$/,""));return u+e}var l=a+t,f=+n.charAt(l+1),h=n.substring(0,l+1).split(""),w=n.charAt(l)==="."?n.charAt(l-1)%2:n.charAt(l)%2;if(f>4&&i==="S"||f>4&&i==="A"&&u===""||f>5&&i==="A"&&u==="-"||f>5&&i==="s"||f>5&&i==="a"&&u===""||f>4&&i==="a"&&u==="-"||f>5&&i==="B"||f===5&&i==="B"&&w===1||f>0&&i==="C"&&u===""||f>0&&i==="F"&&u==="-"||f>0&&i==="U")for(s=h.length-1;s>=0;s-=1)if(h[s]!==".")if(h[s]=+h[s]+1,h[s]<10)break;else s>0&&(h[s]="0");return h=h.slice(0,l+1),e=v(h.join("")),u+e}function a(t,i){this.options=i,this.that=t,this.$that=n(t),this.formatted=!1,this.io=r(this.$that,this.options),this.value=t.value}function k(n){var t=n.data("autoNumeric");return t||(t={},n.data("autoNumeric",t)),t}function i(n,t){var r=k(n),i=r.holder;return i===undefined&&t&&(i=new a(n.get(0),t),r.holder=i),i}function v(n){var t=n.data("autoNumeric");return t&&t.holder?t.holder.options:{}}function g(t){t=t||{};var r=n(this),u=i(r,t);u.io.aForm&&(this.value||u.io.wEmpty!=="empty")&&r.autoNumericSet(r.autoNumericGet(t),t)}function nt(t){var u=n(t.target),r=i(u);return(r.init(t),r.skipAllways(t))?(r.processed=!0,!0):r.processAllways()?(r.processed=!0,r.formatQuick(),t.preventDefault(),!1):(r.formatted=!1,!0)}function tt(t){var u=n(t.target),r=i(u),f=r.processed;if(r.init(t),r.skipAllways(t))return!0;if(f)return t.preventDefault(),!1;if(r.processAllways()||r.processKeypress())return r.formatQuick(),t.preventDefault(),!1;r.formatted=!1}function it(t){var f=n(t.target),r=i(f),u;if((r.init(t),u=r.skipAllways(t),r.kdCode=0,delete r.valuePartsBeforePaste,u)||this.value==="")return!0;r.formatted||r.formatQuick()}function rt(t){var r=n(t.target),u=i(r),e;u.inVal=r.val(),e=f(u.inVal,u.io,!0),e!==null&&r.val(e)}function w(r){var v=n(r.target),y=i(v),l=y.io,c=v.val(),p=c,a;c!==""&&(c=t(c,l),f(c,l)===null&&e(c,l)?(c=o(c,l.aDec,l.aNeg),c=u(c,l.mDec,l.mRound,l.aPad),c=h(c,l.aDec,l.aNeg)):c=""),a=f(c,l,!1),a===null&&(a=s(c,l)),a!==p&&v.val(a),a!==y.inVal&&(v.change(),delete y.inVal)}function l(t){return typeof t=="string"&&(t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),t="#"+t.replace(/(:|\.)/g,"\\$1")),n(t)}a.prototype={init:function(n){this.value=this.that.value,this.io=r(this.$that,this.options),this.ctrlKey=n.ctrlKey,this.cmdKey=n.metaKey,this.shiftKey=n.shiftKey,this.selection=d(this.that),(n.type==="keydown"||n.type==="keyup")&&(this.kdCode=n.keyCode),this.which=n.which,this.processed=!1,this.formatted=!1},setSelection:function(n,t,i){n=Math.max(n,0),t=Math.min(t,this.that.value.length),this.selection={start:n,end:t,length:t-n},(i===undefined||i)&&b(this.that,n,t)},setPosition:function(n,t){this.setSelection(n,n,t)},getBeforeAfter:function(){var n=this.value,t=n.substring(0,this.selection.start),i=n.substring(this.selection.end,n.length);return[t,i]},getBeforeAfterStriped:function(){var n=this.getBeforeAfter();return n[0]=t(n[0],this.io),n[1]=t(n[1],this.io),n},normalizeParts:function(n,i){var r=this.io,e,u,f;return i=t(i,r),e=i.match(/^\d/)?!0:"leading",n=t(n,r,e),(n===""||n===r.aNeg)&&i>""&&(i=i.replace(/^0*(\d)/,"$1")),u=n+i,r.aDec&&(f=u.match(new RegExp("^"+r._aNegReg+"\\"+r.aDec)),f&&(n=n.replace(f[1],f[1]+"0"),u=n+i)),r.wEmpty==="zero"&&(u===r.aNeg||u==="")&&(n+="0"),[n,i]},setValueParts:function(n,t){var r=this.io,f=this.normalizeParts(n,t),i=f.join(""),u=f[0].length;return e(i,r)?(i=y(i,r.aDec,r.mDec),u>i.length&&(u=i.length),this.value=i,this.setPosition(u,!1),!0):!1},signPosition:function(){var n=this.io,u=n.aSign,i=this.that,t,f,r;return u?(t=u.length,n.pSign==="p"?(f=n.aNeg&&i.value&&i.value.charAt(0)===n.aNeg,f?[1,t+1]:[0,t]):(r=i.value.length,[r-t,r])):[1e3,-1]},expandSelectionOnSign:function(n){var t=this.signPosition(),i=this.selection;i.start<t[1]&&i.end>t[0]&&((i.start<t[0]||i.end>t[1])&&this.value.substring(Math.max(i.start,t[0]),Math.min(i.end,t[1])).match(/^\s*$/)?i.start<t[0]?this.setSelection(i.start,t[0],n):this.setSelection(t[1],i.end,n):this.setSelection(Math.min(i.start,t[0]),Math.max(i.end,t[1]),n))},checkPaste:function(){if(this.valuePartsBeforePaste!==undefined){var n=this.getBeforeAfter(),i=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste,n[0]=n[0].substr(0,i[0].length)+t(n[0].substr(i[0].length),this.io),this.setValueParts(n[0],n[1])||(this.value=i.join(""),this.setPosition(i[0].length,!1))}},skipAllways:function(n){var t=this.kdCode,e=this.which,r=this.ctrlKey,u=this.cmdKey;if(t===17&&n.type==="keyup"&&this.valuePartsBeforePaste!==undefined)return this.checkPaste(),!1;if(t>=112&&t<=123||t>=91&&t<=93||t>=9&&t<=31||t<8&&(e===0||e===t)||t===144||t===145||t===45||(r||u)&&t===65)return!0;if((r||u)&&(t===67||t===86||t===88))return n.type==="keydown"&&this.expandSelectionOnSign(),t===86&&(n.type==="keydown"||n.type==="keypress"?this.valuePartsBeforePaste===undefined&&(this.valuePartsBeforePaste=this.getBeforeAfter()):this.checkPaste()),n.type==="keydown"||n.type==="keypress"||t===67;if(r||u)return!0;if(t===37||t===39){var f=this.io.aSep,i=this.selection.start,o=this.that.value;return n.type==="keydown"&&f&&!this.shiftKey&&(t===37&&o.charAt(i-2)===f?this.setPosition(i-1):t===39&&o.charAt(i)===f&&this.setPosition(i+1)),!0}return t>=34&&t<=40?!0:!1},processAllways:function(){var n;return this.kdCode===8||this.kdCode===46?(this.selection.length?(this.expandSelectionOnSign(!1),n=this.getBeforeAfterStriped(),this.setValueParts(n[0],n[1])):(n=this.getBeforeAfterStriped(),this.kdCode===8?n[0]=n[0].substring(0,n[0].length-1):n[1]=n[1].substring(1,n[1].length),this.setValueParts(n[0],n[1])),!0):!1},processKeypress:function(){var n=this.io,r=String.fromCharCode(this.which),u=this.getBeforeAfterStriped(),i=u[0],t=u[1];return r===n.aDec||n.altDec&&r===n.altDec||(r==="."||r===",")&&this.kdCode===110?!n.mDec||!n.aDec?!0:n.aNeg&&t.indexOf(n.aNeg)>-1?!0:i.indexOf(n.aDec)>-1?!0:t.indexOf(n.aDec)>0?!0:(t.indexOf(n.aDec)===0&&(t=t.substr(1)),this.setValueParts(i+n.aDec,t),!0):r==="-"||r==="+"?n.aNeg?(i===""&&t.indexOf(n.aNeg)>-1&&(i=n.aNeg,t=t.substring(1,t.length)),i=i.charAt(0)===n.aNeg?i.substring(1,i.length):r==="-"?n.aNeg+i:i,this.setValueParts(i,t),!0):!0:r>="0"&&r<="9"?(n.aNeg&&i===""&&t.indexOf(n.aNeg)>-1&&(i=n.aNeg,t=t.substring(1,t.length)),this.setValueParts(i+r,t),!0):!0},formatQuick:function(){var n=this.io,o=this.getBeforeAfterStriped(),t=s(this.value,this.io),i=t.length,r,u,e,f;if(t){for(r=o[0].split(""),u=0;u<r.length;u+=1)r[u].match("\\d")||(r[u]="\\"+r[u]);e=new RegExp("^.*?"+r.join(".*?")),f=t.match(e),f?(i=f[0].length,(i===0&&t.charAt(0)!==n.aNeg||i===1&&t.charAt(0)===n.aNeg)&&n.aSign&&n.pSign==="p"&&(i=this.io.aSign.length+(t.charAt(0)==="-"?1:0))):n.aSign&&n.pSign==="s"&&(i-=n.aSign.length)}this.that.value=t,this.setPosition(i),this.formatted=!0}},n.fn.autoNumeric=function(n){return this.each(function(){g.call(this,n)}).unbind(".autoNumeric").bind({"keydown.autoNumeric":nt,"keypress.autoNumeric":tt,"keyup.autoNumeric":it,"focusin.autoNumeric":rt,"focusout.autoNumeric":w})},n.autoNumeric={},n.autoNumeric.Strip=function(i){var s=l(i),e=v(s),f,u;return arguments[1]&&typeof arguments[1]=="object"&&(e=n.extend({},e,arguments[1])),f=r(s,e),u=l(i).val(),u=t(u,f),u=o(u,f.aDec,f.aNeg),+u==0&&(u="0"),u},n.autoNumeric.Format=function(t,i){var c=l(t),o=v(c),f;return arguments[2]&&typeof arguments[2]=="object"&&(o=n.extend({},o,arguments[2])),i.toString(),f=r(c,o),i=u(i,f.mDec,f.mRound,f.aPad),i=h(i,f.aDec,f.aNeg),e(i,f)||(i=u("",f.mDec,f.mRound,f.aPad)),s(i,f)},n.fn.autoNumericGet=function(){return arguments[0]?n.autoNumeric.Strip(this,arguments[0]):n.autoNumeric.Strip(this)},n.fn.autoNumericSet=function(t){return arguments[1]?this.val(n.autoNumeric.Format(this,t,arguments[1])):this.val(n.fn.autoNumeric.Format(this,t))},n.autoNumeric.FormatAmount=function(t,i){var o=n.extend({},n.autoNumeric.defaults,i),f;return t.toString(),f=r(null,o),t=u(t,f.mDec,f.mRound,f.aPad),t=h(t,f.aDec,f.aNeg),e(t,f)||(t=u("",f.mDec,f.mRound,f.aPad)),s(t,f)},n.autoNumeric.GetValue=function(i,u){var s=n.extend({},n.autoNumeric.defaults,u),e=r(null,s),f=i;return f=t(f,e),f=o(f,e.aDec,e.aNeg),+f==0&&(f="0"),f},n.autoNumeric.defaults={aNum:"0123456789",aSep:",",dGroup:"3",aDec:".",altDec:null,aSign:"",pSign:"p",vMax:"999999999.99",vMin:"0.00",mDec:null,mRound:"S",aPad:!1,wEmpty:"empty",aForm:!0},n.fn.autoNumeric.defaults=n.autoNumeric.defaults,n.fn.autoNumeric.Strip=n.autoNumeric.Strip,n.fn.autoNumeric.Format=n.autoNumeric.Format}(jQuery),function(){"use strict";var n=999999999999.99;$.autoNumeric.defaults.vMax=n,$.autoNumeric.defaults.aDec=Gap.Portal.UI.DecimalSeparator||".",$.autoNumeric.defaults.aSep=Gap.Portal.UI.NumberGroupSeparator||","}()